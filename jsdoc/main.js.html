<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: main.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Date: 2013-06-27
 */
/*console.log($.fn.jquery);*/


/**
 * 非同期関数を並列実行後、コールバックを実行するラッパークラス
 * @param configs {object}
 * @returns {object} Instance Return. self chain methods.
 * @constructor
 * @license The MIT License (MIT)
 */
var AsyncTasks = function (configs) {
  "use strict";
  /**
   * 非同期タスク実行後のステータスを格納する
   * @type {Array}
   */
  this.flags   = [];
  /**
   * Success コールバック
   * @type {Function}
   */
  this.success = configs && configs.success || function () {};
  /**
   * fail コールバック
   * @type {Function}
   */
  this.fail    = configs && configs.fail    || function () {};
  return this;
};


AsyncTasks.prototype = {
  /**
   * runs
   * 非同期実行する関数を複数渡す
   * @param {...Function}
   * @returns {object} Instance Return. self chain methods.
   */
  runs: function () {
    "use strict";
    this.funcs = Array.prototype.slice.call(arguments);
    return this;
  },
  /**
   * runs にセットされた非同期処理を全て実行する
   */
  start: function () {
    "use strict";
    var i, iz;
    for (i = 0, iz = this.funcs.length; i &lt; iz; i++) this.funcs[i]();
  },
  /**
   * async で実行されたコールバック毎に呼ばれる&lt;br>
   * 引数 status を渡すことで success と fail を最終的に振り分ける
   * @param status {Boolean} 非同期処理を実行後のステータスをセット Default: true
   * @returns {object} Instance Return. self chain methods.
   */
  next: function (status) {
    "use strict";
    // status が渡ってこない場合は true をセットする
    this.flags[this.flags.length] = status || true;

    // runs に渡った関数の数と flags の数が一致したら complete() を実行する
    if (this.funcs.length === this.flags.length) this.complete();
    return this;
  },
  /**
   * complete
   * 非同期タスク全て完了時に呼ばれ
   * success もしくは fail コールバック関数を呼び出す
   * @returns {boolean} Success to true or Fail to false
   */
  complete: function () {
    "use strict";
    var i, iz;

    for (i = 0, iz = this.flags.length; i &lt; iz; i++) {
      // Status is fail.
      if (!this.flags[i]) {
        this.fail();
        return false;
      }
    }

    this.success();
    return true;
  }
};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AsyncTasks.html">AsyncTasks</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Jun 27 2013 18:41:42 GMT+0900 (JST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
